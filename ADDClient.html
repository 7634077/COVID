<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="covid.css">

    <script>

            async function submitForm() { 
              
              let addresses = document.getElementById("address").value;
              let address = addresses.split(" ");
              let id = document.getElementById("id").value;
              let fname = document.getElementById("fname").value;
              let lname = document.getElementById("lname").value;
              let street = address[0];
              let number = address[1];
              let city = address[2];
              let birthday = document.getElementById("birthday").value;
              let tel = document.getElementById("tel").value;
              let pel = document.getElementById("pel").value;
console.log("address",street)
              let obj = {"id" : id, "name" : {"fname":fname,"lname":lname}, "address":{"street":street,"number":number,"city":city},"birthday":birthday,"tel":tel,"pel":pel};
                console.log(obj)
                let fetchParams = {
                    method : 'POST',
                    body : JSON.stringify(obj),
                    headers : {"Content-type" : "application/json"}
                }

                let resp = await fetch("http://localhost:8000/api/clients", fetchParams);
                if(resp.ok)
                {
                  console.log(resp)
                    let status = await resp.json();

                    alert(status);
                    window.location = "RESTClient.html";

                }
            }
                
            
        
    </script>

<meta name="viewport" content="width=device-width, initial-scale=1">

</head>
<body>

<h3>Client Form</h3>

<div class="container" >
  <form method="post" onsubmit="submitForm()" name="addForm">
    <label for="fname">First Name</label>
    <input type="text" id="fname" name="firstname" placeholder="Your name.." required="required">

    <label for="lname">Last Name</label>
    <input type="text" id="lname" name="lastname" placeholder="Your last name.." required="required">

    <label for="id">id</label>
    <input type="text" id="id" name="id" placeholder="Your id.." required="required">

    <label for="birthday">birthday</label>
    <input type="text" id="birthday" name="birthday" placeholder="01-01-2000" required="required">

    <label for="tel">tel</label>
    <input type="text" id="tel" name="tel" placeholder="01-123-4657" required="required">

    <label for="pel">pel</label>
    <input type="text" id="pel" name="pel" placeholder="055-678-9123" required="required">

    <label for="address">address</label>
    <textarea id="address" name="addtess" placeholder="street 0 city.." required="required"></textarea>

    <input type="submit" id="btnSubmit" value="add" >
  </form>
</div>

</body>
</html>
